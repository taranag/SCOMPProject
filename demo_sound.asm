ORG 0

	; Get the switch values
	;IN     Switches
	; Send to the peripheral
	;OUT    Beep
	; Delay for 1 second
	;CALL   Delay
	; Do it again
	;JUMP   0
	IN ALLIO 
	AND Button3
    jzero SwitchMode

	LOAD    A1
    OUT     Beep
    Call    Delay
	
	LOAD    As1
    OUT     Beep
    Call    Delay
	
	LOAD    B1
    OUT     Beep
    Call    Delay
	
	LOAD    C2
    OUT     Beep
    Call    Delay
	
	LOAD    Cs2
    OUT     Beep
    Call    Delay
	
	LOAD    D2
    OUT     Beep
    Call    Delay
	
	LOAD    Ds2
    OUT     Beep
    Call    Delay
	
	LOAD    E2
    OUT     Beep
    Call    Delay
	
	LOAD    F2
    OUT     Beep
    Call    Delay
	
	LOAD    Fs2
    OUT     Beep
    Call    Delay
	
	LOAD    G2
    OUT     Beep
    Call    Delay
	
	LOAD    Gs2
    OUT     Beep
    Call    Delay
	
	IN ALLIO 
	AND Button3
    jzero SwitchMode
	
	
	
	LOAD    A2
    OUT     Beep
    Call    Delay
	
	LOAD    As2
    OUT     Beep
    Call    Delay
	
	LOAD    B2
    OUT     Beep
    Call    Delay
	
	LOAD    C3
    OUT     Beep
    Call    Delay
	
	LOAD    Cs3
    OUT     Beep
    Call    Delay
	
	LOAD    D3
    OUT     Beep
    Call    Delay
	
	LOAD    Ds3
    OUT     Beep
    Call    Delay
	
	LOAD    E3
    OUT     Beep
    Call    Delay
	
	LOAD    F3
    OUT     Beep
    Call    Delay
	
	LOAD    Fs3
    OUT     Beep
    Call    Delay
	
	LOAD    G3
    OUT     Beep
    Call    Delay
	
	LOAD    Gs3
    OUT     Beep
    Call    Delay
	
	IN ALLIO 
	AND Button3
    jzero SwitchMode
	
	
	
	LOAD    A3
    OUT     Beep
    Call    Delay
	
	LOAD    As3
    OUT     Beep
    Call    Delay
	
	LOAD    B3
    OUT     Beep
    Call    Delay
	
	LOAD    C4
    OUT     Beep
    Call    Delay
	
	LOAD    Cs4
    OUT     Beep
    Call    Delay
	
	LOAD    D4
    OUT     Beep
    Call    Delay
	
	LOAD    Ds4
    OUT     Beep
    Call    Delay
	
	LOAD    E4
    OUT     Beep
    Call    Delay
	
	LOAD    F4
    OUT     Beep
    Call    Delay
	
	LOAD    Fs4
    OUT     Beep
    Call    Delay
	
	LOAD    G4
    OUT     Beep
    Call    Delay
	
	LOAD    Gs4
    OUT     Beep
    Call    Delay
	
	IN ALLIO 
	AND Button3
    jzero SwitchMode
	
	
	LOAD    A4
    OUT     Beep
    Call    Delay
	
	LOAD    As4
    OUT     Beep
    Call    Delay
	
	LOAD    B4
    OUT     Beep
    Call    Delay
	
	LOAD    C5
    OUT     Beep
    Call    Delay
	
	LOAD    Cs5
    OUT     Beep
    Call    Delay
	
	LOAD    D5
    OUT     Beep
    Call    Delay
	
	LOAD    Ds5
    OUT     Beep
    Call    Delay
	
	LOAD    E5
    OUT     Beep
    Call    Delay
	
	LOAD    F5
    OUT     Beep
    Call    Delay
	
	LOAD    Fs5
    OUT     Beep
    Call    Delay
	
	LOAD    G5
    OUT     Beep
    Call    Delay
	
	LOAD    Gs5
    OUT     Beep
    Call    Delay
	
	IN ALLIO 
	AND Button3
    jzero SwitchMode
	
	
	LOAD    A5
    OUT     Beep
    Call    Delay
	
	LOAD    As5
    OUT     Beep
    Call    Delay
	
	LOAD    B5
    OUT     Beep
    Call    Delay
	
	LOAD    C6
    OUT     Beep
    Call    Delay
	
	LOAD    Cs6
    OUT     Beep
    Call    Delay
	
	LOAD    D6
    OUT     Beep
    Call    Delay
	
	LOAD    Ds6
    OUT     Beep
    Call    Delay
	
	LOAD    E6
    OUT     Beep
    Call    Delay
	
	LOAD    F6
    OUT     Beep
    Call    Delay
	
	LOAD    Fs6
    OUT     Beep
    Call    Delay
	
	LOAD    G6
    OUT     Beep
    Call    Delay
	
	LOAD    Gs6
    OUT     Beep
    Call    Delay
	
	IN ALLIO 
	AND Button3
    jzero SwitchMode
	
	
	LOAD    A6
    OUT     Beep
    Call    Delay
	
	LOAD    As6
    OUT     Beep
    Call    Delay
	
	LOAD    B6
    OUT     Beep
    Call    Delay
	
	LOAD    C7
    OUT     Beep
    Call    Delay
	
	LOAD    Cs7
    OUT     Beep
    Call    Delay
	
	LOAD    D7
    OUT     Beep
    Call    Delay
	
	LOAD    Ds7
    OUT     Beep
    Call    Delay
	
	LOAD    E7
    OUT     Beep
    Call    Delay
	
	LOAD    F7
    OUT     Beep
    Call    Delay
	
	LOAD    Fs7
    OUT     Beep
    Call    Delay
	
	LOAD    G7
    OUT     Beep
    Call    Delay
	
	LOAD    Gs7
    OUT     Beep
    Call    Delay
	
	IN ALLIO 
	AND Button3
    jzero SwitchMode
	
	
	LOAD    A7
    OUT     Beep
    Call    Delay
	
	LOAD    As7
    OUT     Beep
    Call    Delay
	
	LOAD    B7
    OUT     Beep
    Call    Delay
	
	LOAD    C8
    OUT     Beep
    Call    Delay
	
	LOAD    Cs8
    OUT     Beep
    Call    Delay
	
	LOAD    D8
    OUT     Beep
    Call    Delay
	
	LOAD    Ds8
    OUT     Beep
    Call    Delay
	
	LOAD    E8
    OUT     Beep
    Call    Delay
	
	LOAD    F8
    OUT     Beep
    Call    Delay
	
	LOAD    Fs8
    OUT     Beep
    Call    Delay
	
	LOAD    G8
    OUT     Beep
    Call    Delay
	
	LOAD    Gs8
    OUT     Beep
    Call    Delay
	
	IN ALLIO 
	AND Button3
    jzero SwitchMode
	
	
	
	LOAD    A8
    OUT     Beep
    Call    Delay
	
	LOAD    As8
    OUT     Beep
    Call    Delay
	
	LOAD    B8
    OUT     Beep
    Call    Delay
	
	LOAD    C9
    OUT     Beep
    Call    Delay
	
	LOAD    Cs9
    OUT     Beep
    Call    Delay
	
	LOAD    D9
    OUT     Beep
    Call    Delay
	
	LOAD    Ds9
    OUT     Beep
    Call    Delay
	
	LOAD    E9
    OUT     Beep
    Call    Delay
	
	LOAD    F9
    OUT     Beep
    Call    Delay
	
	LOAD    Fs9
    OUT     Beep
    Call    Delay
	
	LOAD    G9
    OUT     Beep
    Call    Delay
	
	LOAD    Gs9
    OUT     Beep
    Call    Delay
	
	
	
	JUMP 0
	
	
	
	
	
; Subroutine to delay for 0.2 seconds.
Delay:
	OUT    Timer
WaitingLoop:
	IN     Timer
	ADDI   -10
	JNEG   WaitingLoop
	RETURN
	
	
	
	
SwitchMode:
    CALL    DelaySong
    CALL    DelaySong
    CALL    DelaySong

    ; EDC
	LOAD    E4square
    OUT     Beep
    Call    DelaySong

    LOAD    D4square
    OUT     Beep
    Call    DelaySong

    LOAD    C4square
    OUT     Beep
    Call    DelaySong

    ; EDC
    LOAD    E4square
    OUT     Beep
    Call    DelaySong

    LOAD    D4square
    OUT     Beep
    Call    DelaySong

    LOAD    C4square
    OUT     Beep
    Call    DelaySong

    LOAD    Zero
    OUT     Beep
    Call    DelaySong

    ; C C C C
    LOAD    C4square
    OUT     Beep
    Call    ZeroDelay

    LOAD    Zero
    OUT     Beep
    Call    DelaySong

    LOAD    C4square
    OUT     Beep
    Call    ZeroDelay

    LOAD    Zero
    OUT     Beep
    Call    DelaySong

    LOAD    C4square
    OUT     Beep
    Call    ZeroDelay
    
    LOAD    Zero
    OUT     Beep
    Call    DelaySong

    LOAD    C4square
    OUT     Beep
    Call    ZeroDelay

    ; D D D D
    LOAD    D4square
    OUT     Beep
    Call    DelaySong

    LOAD    Zero
    OUT     Beep
    Call    DelaySong

    LOAD    D4square
    OUT     Beep
    Call    ZeroDelay

    LOAD    Zero
    OUT     Beep
    Call    DelaySong

    LOAD    D4square
    OUT     Beep
    Call    ZeroDelay

    LOAD    Zero
    OUT     Beep
    Call    DelaySong

    LOAD    D4square
    OUT     Beep
    Call    ZeroDelay

    ; EDC
    LOAD    E4square
    OUT     Beep
    Call    DelaySong

    LOAD    D4square
    OUT     Beep
    Call    DelaySong

    LOAD    C4square
    OUT     Beep
    Call    DelaySong

    LOAD    Zero
    OUT     Beep
    Call    DelaySong

BeepTest:
    IN     ALLIO    
	; Send to the peripheral
	OUT    Beep
	; Delay for 1 second
	CALL   Delay2
	; Do it again
    JUMP   BeepTest
	
	
Delay2:
	OUT    Timer
WaitingLoop2:
	IN     Timer
	ADDI   -2
	JNEG   WaitingLoop2
	RETURN

ZeroDelay:
	OUT    Timer
ZeroWaitingLoop:
	IN     Timer
	ADDI   -1
	JNEG   ZeroWaitingLoop
	RETURN

DelaySong:
	OUT    Timer
WaitingLoopSong:
	IN     Timer
	ADDI   -5
	JNEG   WaitingLoopSong
	RETURN

; IO address constants
Switches:  EQU 000
LEDs:      EQU 001
Timer:     EQU 002
Hex0:      EQU 004
Hex1:      EQU 005
Beep:      EQU &H40
Button3:   DW &H8000
ALLIO:     EQU &H41

A1: DW &H0411
A2: DW &H0421
A3: DW &H0431
A4: DW &H0441
A5: DW &H0451
A6: DW &H0461
A7: DW &H0471
A8: DW &H0481

As1: DW &H0511
As2: DW &H0521
As3: DW &H0531
As4: DW &H0541
As5: DW &H0551
As6: DW &H0561
As7: DW &H0571
As8: DW &H0581


B1: DW &H0412
B2: DW &H0422
B3: DW &H0432
B4: DW &H0442
B5: DW &H0452
B6: DW &H0462
B7: DW &H0472
B8: DW &H0482


C2: DW &H0423
C3: DW &H0433
C4: DW &H0443
C5: DW &H0453
C6: DW &H0463
C7: DW &H0473
C8: DW &H0483
C9: DW &H0493

Cs2: DW &H0523
Cs3: DW &H0533
Cs4: DW &H0543
Cs5: DW &H0553
Cs6: DW &H0563
Cs7: DW &H0573
Cs8: DW &H0583
Cs9: DW &H0593


D2: DW &H0424
D3: DW &H0434
D4: DW &H0444
D5: DW &H0454
D6: DW &H0464
D7: DW &H0474
D8: DW &H0484
D9: DW &H0494

Ds2: DW &H0524
Ds3: DW &H0534
Ds4: DW &H0544
Ds5: DW &H0554
Ds6: DW &H0564
Ds7: DW &H0574
Ds8: DW &H0584
Ds9: DW &H0594


E2: DW &H0425
E3: DW &H0435
E4: DW &H0445
E5: DW &H0455
E6: DW &H0465
E7: DW &H0475
E8: DW &H0485
E9: DW &H0495


F2: DW &H0426
F3: DW &H0436
F4: DW &H0446
F5: DW &H0456
F6: DW &H0466
F7: DW &H0476
F8: DW &H0486
F9: DW &H0496

Fs2: DW &H0526
Fs3: DW &H0536
Fs4: DW &H0546
Fs5: DW &H0556
Fs6: DW &H0566
Fs7: DW &H0576
Fs8: DW &H0586
Fs9: DW &H0596


G2: DW &H0427
G3: DW &H0437
G4: DW &H0447
G5: DW &H0457
G6: DW &H0467
G7: DW &H0477
G8: DW &H0487
G9: DW &H0497

Gs2: DW &H0527
Gs3: DW &H0537
Gs4: DW &H0547
Gs5: DW &H0557
Gs6: DW &H0567
Gs7: DW &H0577
Gs8: DW &H0587
Gs9: DW &H0597

C4square:		   DW &H4443
D4square:		   DW &H4444
E4square:		   DW &H4445
Zero:		       DW &H4440

